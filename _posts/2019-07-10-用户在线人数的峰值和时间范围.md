---
layout: post
title: "用户在线人数的峰值和时间范围"
description: "用户在线人数的峰值和时间范围"
keywords: "algorithm"
category: "algorithm"
tags: [algorithm,map]
---

## I 问题描述
现有用户日志数据，userid,login_time,logout_time;
找到登录用户数量的峰值；
找到峰值所在的时间段；

## II 思路
### 1. 如果知道每时每刻的在线人数，就可以知道在线人数的峰值和峰值所在的时间段；
- 使用map记录每个时刻的在线人数；
遍历的过程中，针对每个用户的登录时间和登出时间，都到map中创建一条记录；
如果map中有当前时刻的key值，则把对应的value加1；如果没有这个key,则创建一个key,value为1；
- 维护一个变量，用于记录当前的峰值；
遍历的过程中，每次都会到map中去查询记录，将当前峰值与当前时刻的在线人数进行比较，如果峰值小于当前value,则更新峰值；
- 维护一个数组，用于记录峰值对应的时刻；
遍历的过程中，每次更新峰值的时候，就清空该数组；
每次比较当前时刻在线人数和峰值的时候，如果相等，就把当前时刻记录到数组中；
- 遍历完后，已经找到了峰值，和峰值所在的时刻；
最后对峰值所在的时刻数组做处理，找到连续的区间；
遍历时刻数组的过程中，如果后一个值在前一个值的基础上多1秒，则表示是连续的；
就继续往后遍历，直到找到第一个不连续的，那么前面一个时刻就是区间的上界；
当前时刻就是下一个连续区间的下届；
重复以上步骤；


### 2. 


## III 构造测试用例

### 1. 思路
固定60秒内的时间区间；
随机设置一组数据，登录时间范围随便设置；
绘制成折线图，肉眼看出峰值和峰值所在的时间范围；

## IV 写程序

```go

```
